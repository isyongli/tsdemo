<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>闭包单例</title>
  </head>
  <body>
    <div id="test"></div>
    <script type="text/javascript">
      const log = console.log
      var Singleton = (function () {
        var instance
        var CreateSingleton = function (name) {
          this.name = name
          if (instance) {
            return instance
          }
          // 打印实例名字
          // this.getName()
          // instance = this;
          // return instance;
          return (instance = this)
        }
        // 获取实例的名字
        CreateSingleton.prototype.getName = function () {
          console.log(this.name)
        }
        return CreateSingleton
      })()
      // 创建实例对象 1
      var a = new Singleton('a')
      // 创建实例对象 2
      var b = new Singleton('b')
      console.log(a === b)
      Singleton = (function () {
        let instance = null
        return function () {
          if (instance) return instance
          instance = this
          return instance
        }
      })()
    </script>
  </body>
</html>
